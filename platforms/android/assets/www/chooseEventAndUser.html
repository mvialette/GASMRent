<!DOCTYPE HTML>
<html>
<head>
	<title>G.A.S.M. Rent</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!-- Javascripts -->
	<script type="text/javascript" charset="utf-8" src="./cordova.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/angular.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/jquery-2.0.3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/jquery.i18n.properties-min-1.0.9.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/bootstrap.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/respond.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="./js/gasm-rent.js"></script>
	
	<!-- CSS -->
	<link href="./css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="./css/font-awesome.min.css" rel="stylesheet">
	<link href="./css/gasm.css" rel="stylesheet" media="screen">
	
	<!-- JS Function that can be called -->
	<script type="text/javascript">
		window.onload = function() {
			//load I18N bundles
			jQuery(document).ready(function() {
				initLanguages();
			});
	
			// We retreive informations about the diving events
			getInfosOfDivingEventsForSelect();
	
			// We retreive informations about the users
			getInfosOfUsers();
			
			// We retreive informations about equipments
			getInfosOfEquipmentsForSelect();
		}
	
		function loadBundles(lang) {
			jQuery.i18n
					.properties({
						name : 'gasmrent',
						path : 'i18n/',
						mode : 'both',
						language : lang,
						callback : function() {
	
							$("#chooseEventAndUserDescription").html(chooseEventAndUserDescription);
	
							$("#user").html(user + " :");
	
							$("#divingEvent").html(divingEvent + " :");
							
							$("#equipment").html(equipment + " :");
	
							$("#scanQRCode").html(scanQRCode);
							
							$("#rentWithoutScan").html(rentWithoutScan);
							
			        		 $("#summaryByUser").html(summaryByUser);
						}
					});
		}
	
		function sendInfoToDoScan() {
	
			var selectDivingEventsValue = $("#selectDivingEvents").val();
			var selectUsersValue = $("#selectUsers").val();
	
			doScanByDivingEventIdAndUserId(selectDivingEventsValue, selectUsersValue);
		}
		
		function sendInfoWithoutScan() {
	
			var selectDivingEventsValue = $("#selectDivingEvents").val();
			var selectUsersValue = $("#selectUsers").val();
			var selectEquipmentValue = $("#selectEquipments").val();
	
			rentAnEquipment(selectDivingEventsValue, selectUsersValue, selectEquipmentValue);
		}
		
		function sendInfoForSummaryByUser() {
			
			var selectDivingEventsValue = $("#selectDivingEvents").val();
			var selectUsersValue = $("#selectUsers").val();
			
			window.location = "./summaryByUser.html?divingEventId=" + selectDivingEventsValue + "&userId=" + selectUsersValue;
		}
	</script>
</head>
<body ng-app="GasmRentApp" >
	<div ng-controller="MainController" class="container">

		<div ng-include="'./partials/gasm-header.html'" onload="initHeader('chooseEventAndUserPageTitle')"></div>
		
		<form role="form">
			<div class="row text-center viewContent form-group">
				<div class="col-12 pageSection">

					<div class="row">
						<div class="col-12" id="chooseEventAndUserDescription"></div>
					</div>
					<div class="row">
						<div class="col-12" id="divingEvent"></div>
					</div>

					<div class="row">
						<div class="col-12" id="divingEvents"></div>
					</div>

					<div class="row">
						<div class="col-12" id="user"></div>
					</div>

					<div class="row">
						<div class="col-12" id="users"></div>
					</div>
					
					<div class="row">
						<div class="col-12" id="equipment"></div>
					</div>

					<div class="row">
						<div class="col-12" id="equipments"></div>
					</div>
					
					<div class="row largeRow">
						<div class="col-12"><!-- TODO Just to add an empty space, refacto this part by css  --> </div>
					</div>
					
					<div class="row largeRow">
						<div class="col-12">
							<a class="btn btn-primary" href="#" onClick="sendInfoToDoScan()" id="scanQRCode"> </a>
						</div>
					</div>
					
					<div class="row largeRow">
						<div class="col-12">
							<a class="btn btn-primary" href="#" onClick="sendInfoWithoutScan()" id="rentWithoutScan"></a>
						</div>
					</div>
					
					<div class="row largeRow">
						<div class="col-12">
							<a class="btn btn-primary" href="#" onClick="sendInfoForSummaryByUser()" id="summaryByUser"> </a>
						</div>
					</div>

					<div ng-include="'./partials/back-to-home.html'" onload="initBackToHome()"></div>
				</div>
			</div>
		</form>
	</div>
</body>
</html>